@model NIA_CRM.Models.Member

@{
    ViewData["Title"] = "Details";
}

<h1>Details</h1>

<div>
    <h4>Member</h4>
    <hr />

    <div class="container">
        <div class="row">
            <!-- Left Card: Logo and Summaries -->
            <div class="col-md-6">
                <div class="text-center mb-3">
                        @{
        if (Model.MemberLogo?.Content != null)
        {
            @:<div>
                string imageBase64 = Convert.ToBase64String(Model.MemberLogo.Content);
                string imageSrc = string.Format("data:" + Model.MemberLogo.MimeType + ";base64,{0}", imageBase64);
                <img src="@imageSrc" alt="Profile Picture of @Model.Summary" title="Profile Picture of @Model.Summary" class="img-fluid rounded" />
            @:</div><hr />
        }
    }
                       
                    </div>
                <div class="card card-body bg-light text-black">
                    <!-- Logo Section -->
                    

                    <!-- Summary Section -->
                        <h5 class="card-title">Summary</h5>
                        <p>Total Addresses: @Model.Addresses?.Count() ?? 0</p>
                        <p>Membership Types: @Model.MemberMembershipTypes?.Count() ?? 0</p>
                        <p>Notes: @Model.MemberNotes?.Count() ?? 0</p>
                </div>
            </div>

            <!-- Right Card: Detailed Information -->
            <div class="col-md-6">
                <div class="card card-body bg-light text-black">
                    <h5 class="card-title">Detailed Information</h5>
                    <div class="row">
                        <!-- Left side of the right card -->
                        <div class="col-md-6">
                            <dl class="row">
                                <!-- Addresses -->
                                <dt class="col-sm-4">Addresses</dt>
                                <dd class="col-sm-8">
                                    @if (Model.Addresses != null && Model.Addresses.Any())
                                    {
                                        @foreach (var address in Model.Addresses)
                                        {
                                            <p>@address.City</p>
                                        }
                                    }
                                    else
                                    {
                                        <p>No addresses available.</p>
                                    }
                                </dd>

                                <!-- Membership Type -->
                                <dt class="col-sm-4">Membership Type:</dt>
                                <dd class="col-sm-8">
                                    @if (Model.MemberMembershipTypes != null && Model.MemberMembershipTypes.Any())
                                    {
                                        @foreach (var membership in Model.MemberMembershipTypes)
                                        {
                                            <p>@membership.MembershipType.TypeName</p>
                                        }
                                    }
                                    else
                                    {
                                        <p>No membership type available.</p>
                                    }
                                </dd>

                                <!-- Join Date -->
                                <dt class="col-sm-4">@Html.DisplayNameFor(model => model.JoinDate)</dt>
                                <dd class="col-sm-8">
                                    @Html.DisplayFor(model => model.JoinDate)
                                </dd>

                                <!-- Standing Status -->
                                <dt class="col-sm-4">@Html.DisplayNameFor(model => model.StandingStatus)</dt>
                                <dd class="col-sm-8">
                                    @Html.DisplayFor(model => model.StandingStatus)
                                </dd>
                            </dl>
                        </div>

                        <!-- Right side of the right card -->
                        <div class="col-md-6">
                            <dl class="row">
                                <!-- Notes -->
                                <dt class="col-sm-4">Notes:</dt>
                                <dd class="col-sm-12">
                                    @if (Model.MemberNotes != null && Model.MemberNotes.Any())
                                    {
                                        @foreach (var note in Model.MemberNotes)
                                        {
                                            <textarea class="form-control mb-2" readonly>@note.Note</textarea>
                                        }
                                    }
                                    else
                                    {
                                        <textarea class="form-control" readonly>No notes available.</textarea>
                                    }
                                </dd>
                            </dl>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>





<div>
    <a class="btn btn-primary" asp-controller="Member" asp-action="Edit" asp-route-id="@Model.ID">Edit</a>
    <a class="btn btn-primary" asp-controller="Member" asp-action="Index">Back to List</a>
</div>
